.. _zend.search.lucene.overview:

Overzicht
=========

.. _zend.search.lucene.introduction:

Inleiding
---------

Zend Search_Lucene is een algemene tekst search engine die volledig in PHP 5 is geschreven. Omdat het zijn
indexbestanden op het bestandssysteem schrijft en geen database server nodig heeft, kan het zoekmogelijkheden
aanbieden aan vrijwel elke door PHP gestuurde websites. Zend_Search_Lucene biedt de volgende mogelijkheden:



   - Geordend zoeken - betere resultaten eerst

   - Veel krachtige querytypes: ##VERT. phrase queries, wildcard queries, proximity queries, range queries## en
     meer [#]_

   - Zoeken op een bepaald veld (bv: titel, auteur, inhoud)

Zend_Search_Lucene werd afgeleid van het Apache Lucene project. Voor meer informatie over Lucene kan je terecht op:
`http://lucene.apache.org/java/docs/`_.

.. _zend.search.lucene.index-creation.documents-and-fields:

Document en Veld Objecten
-------------------------

Zend_Search_Lucene beschouwt documenten als eenheden voor de indexering. Een document wordt dan opgedeeld in
benoemde velden en velden hebben inhoud waarop kan gezocht worden.

Een document wordt voorgesteld als een Zend_Search_Lucene_Document object, en dit object bevat
Zend_Search_Lucene_Field objecten die de velden voorstellen.

Belangrijk: eender welke informatie kan aan de index worden toegevoegd. Applicatie-specifieke informatie of
metadata kan worden opgeslaan in de documentvelden en later worden opgevraagd met het document tijdens het zoeken.

Het is de verantwoordelijkheid van je applicatie om de indexer aan te sturen. Dit betekent dat data vanuit elke
bron die toegankelijk is door je applicatie kan worden geindexeerd. Bijvoorbeeld de harde schijf, een database, een
HTML formulier, etc.

De *Zend_Search_Lucene_Field* klasse bied verschillende statische methodes om velden met verschillende
eigenschappen aan te maken:

.. code-block:: php
   :linenos:

   <?php
   $doc = new Zend_Search_Lucene_Document();

   // Het veld worde niet tokenized, maar wordt geindexeerd en opgeslagen in de index
   // Opgeslagen velden kunnen uit de index worden opgevraagd
   $doc->addField(Zend_Search_Lucene_Field::Keyword('doctype',
                                                    'autogenerated'));

   // Veld wordt niet tokenized en niet geindexeerd, maar wordt wel in de index opgeslagen
   $doc->addField(Zend_Search_Lucene_Field::UnIndexed('created',
                                                      time()));

   // Binaire string veld wordt niet tokenized en niet geindexeerd,
   // maar wordt wel in de index opgeslagen
   $doc->addField(Zend_Search_Lucene_Field::Binary('icon',
                                                   $iconData));

   // Veld is tokenized en geindexeerd, en opgeslagen in de index
   $doc->addField(Zend_Search_Lucene_Field::Text('annotation',
                                                 'Document annotation text'));

   // Veld is tokenized en geindexeerd, maar niet opgeslagen in de index
   $doc->addField(Zend_Search_Lucene_Field::UnStored('contents',
                                                     'My document content'));

   ?>
Je kan velden je eigen naam geven. Een "contents" veld naam wordt standaard tijdens het zoeken gebruikt. Het is een
goed idee om de belangrijke informatie uit documenten in een veld met deze naam te plaatsen.

.. _zend.search.lucene.index-creation.understanding-field-types:

Veld Types Begrijpen
--------------------

- *Keyword* velden worden opgeslagen en geindexeerd, wat betekent dat ze doorzocht kunnen worden en ook in de
  zoekresultaten getoond kunnen worden. Ze worden niet opgesplitst in aparte woorden door 'tokenization'.
  'Enumerated' database velden lenen zich over het algemeen goed voor Keyword velden in Zend_Search_Lucene.

- *UnIndexed* velden zijn niet doorzoekbaar, maar worden wel teruggegeven bij zoek resultaten. Database timestamps,
  primaire sleutels, paden op het bestandssysteem en andere externe identifiers zijn goede kandidaten voor
  UnIndexed velden.

- *Binary* velden worden niet tokenized of geindexeerd, maar worden wel opgeslagen om bij zoekresultaten te
  gebruiken. Ze kunnen gebruikt worden om data op te slaan als binaire string, zoals een icoontje.

- *Text* velden worden opgeslagen, geindexeerd en tokenized. Tekst velden zijn zeer toepasselijk voor het opslaan
  van informatie zoals onderwerpen en titels die doorzoekbaar moeten zijn en ook bij de zoekresultaten beschikbaar
  moeten zijn.

- *UnStored* velden worden tokenized en geindexeerd, maar niet opgeslagen in de index. Grote hoeveelheden tekst
  worden het best geindexeerd in dit type velden. Data opslaan zorgt voor een grotere index op de harde schijf, dus
  als je het moet doorzoeken maar niet hoeft weer te geven, kan je het beste een UnStored veld gebruiken. UnStored
  velden zijn praktisch wanneer ze worden gebruikt met een Zend_Search_Lucene index in combinatie met een
  relationele database. Je kan grote data velden met UnStored velden indexeren om te doorzoeken, en om ze yut de
  relationele database te halen met aparte velden als identifier.

  .. table:: Zend_Search_Lucene_Field Types

     +----------+------+-------+---------+------+
     |Field Type|Stored|Indexed|Tokenized|Binary|
     +==========+======+=======+=========+======+
     |Keyword   |Ja    |Ja     |Nee      |Nee   |
     +----------+------+-------+---------+------+
     |UnIndexed |Ja    |Nee    |Nee      |Nee   |
     +----------+------+-------+---------+------+
     |Binary    |Ja    |Nee    |Nee      |Ja    |
     +----------+------+-------+---------+------+
     |Text      |Ja    |Ja     |Ja       |Nee   |
     +----------+------+-------+---------+------+
     |UnStored  |Nee   |Ja     |Ja       |Nee   |
     +----------+------+-------+---------+------+



.. _`http://lucene.apache.org/java/docs/`: http://lucene.apache.org/java/docs/

.. [#] Alleen term en multi-term queries worden op dit moment ondersteund.